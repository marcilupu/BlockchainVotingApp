using BlockchainVotingApp.SmartContract.Extensions;
using BlockchainVotingApp.SmartContract.Infrastructure;
using BlockchainVotingApp.SmartContract.Models;
using Microsoft.Extensions.Configuration;
using Microsoft.Extensions.DependencyInjection;
using Newtonsoft.Json;
using Org.BouncyCastle.Asn1.X509;
using QRCoder;
using System.Drawing;
using System.Drawing.Imaging;
using ZXing;
using ZXing.Common;
using ZXing.QrCode;
using ZXing.Windows.Compatibility;

namespace BlockchainApp.Test;

internal static class ZKPTest
{
    public static async Task Test()
    {
        IServiceCollection services = new ServiceCollection();

        IConfiguration configuration = new ConfigurationBuilder().AddJsonFile("appsettings.json").Build();

        services.AddSingleton(configuration);
        services.AddSmartContractService();

        var serviceProvider = services.BuildServiceProvider();

        var generator = serviceProvider.GetRequiredService<IVotingContractGenerator>();
        var smartContractServiceFactory = serviceProvider.GetService<IVotingContractServiceFactory>();
        var registrationContractServiceFactory = serviceProvider.GetService<IRegisterContractServiceFactory>();
        var registrationGenerator = serviceProvider.GetRequiredService<IRegisterContractGenerator>();

        var contextIdentifier = "0_Test";

        //var result = await registrationGenerator.CreateSmartContractContext(contextIdentifier, 1);

        //var proof = await registrationGenerator.GenerateProof(contextIdentifier, 1, 2000);

        string adminKey = "0xae9299499ac8c7280118a01cb26e1011a78fb6bf6d8bb493ad10d200d12fffb9";

        var contractAddress = await registrationGenerator.DeploySmartContract(contextIdentifier, adminKey);

        string abi = "[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"verifier\",\"outputs\":[{\"internalType\":\"contract Verifier\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"ax\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"ay\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"bx0\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"bx1\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"by0\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"by1\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"cx\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"cy\",\"type\":\"uint256\"}],\"name\":\"register\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"ax\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"ay\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"bx0\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"bx1\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"by0\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"by1\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"cx\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"cy\",\"type\":\"uint256\"}],\"name\":\"getProof\",\"outputs\":[{\"components\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"X\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"Y\",\"type\":\"uint256\"}],\"internalType\":\"struct Pairing.G1Point\",\"name\":\"a\",\"type\":\"tuple\"},{\"components\":[{\"internalType\":\"uint256[2]\",\"name\":\"X\",\"type\":\"uint256[2]\"},{\"internalType\":\"uint256[2]\",\"name\":\"Y\",\"type\":\"uint256[2]\"}],\"internalType\":\"struct Pairing.G2Point\",\"name\":\"b\",\"type\":\"tuple\"},{\"components\":[{\"internalType\":\"uint256\",\"name\":\"X\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"Y\",\"type\":\"uint256\"}],\"internalType\":\"struct Pairing.G1Point\",\"name\":\"c\",\"type\":\"tuple\"}],\"internalType\":\"struct Verifier.Proof\",\"name\":\"proof\",\"type\":\"tuple\"}],\"stateMutability\":\"pure\",\"type\":\"function\"}]";
        string bytecode = "0x608060405234801561001057600080fd5b5060405161001d9061007e565b604051809103906000f080158015610039573d6000803e3d6000fd5b506000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555061008b565b611936806107cc83390190565b6107328061009a6000396000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c80632b7ac3f31461004657806384104be914610064578063fb5a4d3b14610094575b600080fd5b61004e6100c4565b60405161005b91906105df565b60405180910390f35b61007e60048036038101906100799190610395565b6100e8565b60405161008b919061061a565b60405180910390f35b6100ae60048036038101906100a99190610395565b610194565b6040516100bb91906105c4565b60405180910390f35b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6100f06102ad565b6100f86102e0565b6101006102fa565b6101086102e0565b8b8360000181815250508a83602001818152505060405180604001604052808b81526020018a81525082600001819052506040518060400160405280898152602001888152508260200181905250858160000181815250508481602001818152505082846000018190525081846020018190525080846040018190525050505098975050505050505050565b6000806101a78a8a8a8a8a8a8a8a6100e8565b905060008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663f6af0311826040518263ffffffff1660e01b8152600401610202919061061a565b60206040518083038186803b15801561021a57600080fd5b505afa92505050801561024b57506040513d601f19601f82011682018060405250810190610248919061036c565b60015b61029a576000610290576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610287906105fa565b60405180910390fd5b60009150506102a1565b5060019150505b98975050505050505050565b60405180606001604052806102c06102e0565b81526020016102cd6102fa565b81526020016102da6102e0565b81525090565b604051806040016040528060008152602001600081525090565b604051806040016040528061030d610320565b815260200161031a610320565b81525090565b6040518060400160405280600290602082028036833780820191505090505090565b600081519050610351816106ce565b92915050565b600081359050610366816106e5565b92915050565b60006020828403121561037e57600080fd5b600061038c84828501610342565b91505092915050565b600080600080600080600080610100898b0312156103b257600080fd5b60006103c08b828c01610357565b98505060206103d18b828c01610357565b97505060406103e28b828c01610357565b96505060606103f38b828c01610357565b95505060806104048b828c01610357565b94505060a06104158b828c01610357565b93505060c06104268b828c01610357565b92505060e06104378b828c01610357565b9150509295985092959890939650565b600061045383836105b5565b60208301905092915050565b61046881610640565b6104728184610658565b925061047d82610636565b8060005b838110156104ae5781516104958782610447565b96506104a08361064b565b925050600181019050610481565b505050505050565b6104bf81610674565b82525050565b6104ce816106aa565b82525050565b60006104e1601483610663565b91507f54686520766f74657220697320696e76616c69640000000000000000000000006000830152602082019050919050565b60408201600082015161052a60008501826105b5565b50602082015161053d60208501826105b5565b50505050565b608082016000820151610559600085018261045f565b50602082015161056c604085018261045f565b50505050565b610100820160008201516105896000850182610514565b50602082015161059c6040850182610543565b5060408201516105af60c0850182610514565b50505050565b6105be816106a0565b82525050565b60006020820190506105d960008301846104b6565b92915050565b60006020820190506105f460008301846104c5565b92915050565b60006020820190508181036000830152610613816104d4565b9050919050565b6000610100820190506106306000830184610572565b92915050565b6000819050919050565b600060029050919050565b6000602082019050919050565b600081905092915050565b600082825260208201905092915050565b60008115159050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b60006106b5826106bc565b9050919050565b60006106c782610680565b9050919050565b6106d781610674565b81146106e257600080fd5b50565b6106ee816106a0565b81146106f957600080fd5b5056fea2646970667358221220251976356e8c83ac102104bba0a3c478d1ef2de0c1c7b28b7e4ab20ee3c5dea464736f6c63430008000033608060405234801561001057600080fd5b50611916806100206000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c8063f6af031114610030575b600080fd5b61004a6004803603810190610045919061161d565b610060565b6040516100579190611656565b60405180910390f35b600080600067ffffffffffffffff8111156100a4577f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6040519080825280602002602001820160405280156100d25781602001602082028036833780820191505090505b50905060006100e182856100fc565b14156100f15760019150506100f7565b60009150505b919050565b6000807f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000019050600061012c61032b565b90508060800151516001865161014291906116c8565b1461014c57600080fd5b60006040518060400160405280600081526020016000815250905060005b865181101561027757838782815181106101ad577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6020026020010151106101bf57600080fd5b6102628261025d85608001516001856101d891906116c8565b8151811061020f577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200260200101518a8581518110610250577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6020026020010151610703565b61081c565b9150808061026f906117c2565b91505061016a565b506102c78183608001516000815181106102ba577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001015161081c565b905061030d856000015186602001516102df84610981565b85604001516102f18a60400151610981565b87606001516103038960000151610981565b8960200151610a26565b61031d5760019350505050610325565b600093505050505b92915050565b610333611376565b60405180604001604052807f25a9665f2b5eba43677552a67ed0aa636257c5ce7a03f206a14d522731223a2f81526020017f287e9605643798e6af053f6b072474f5b95690057874d45fdb1dcbbe913dcb378152508160000181905250604051806040016040528060405180604001604052807f0470e66161044edb786214263c52c1702098f0bd761610e2672ccae86a9b729e81526020017f26f7eebc71a622b93d1d76663cd2a64ef4a0410db06f7e26aaf32efe3cad12fe815250815260200160405180604001604052807f0707c24dcbc7583194b3f82fec40c9e7c8b4123a6f5d3140f24ee77cf581884c81526020017f25d4e85ee2967ca855caa7e577fbf3c286b29e62c005c6976a255764a6ae72ec8152508152508160200181905250604051806040016040528060405180604001604052807f1232756d452d0eef87f28d2e0db3e938a207bf3f4d249a8fdccc2f05f4efffd581526020017f2b13f42df55529a16fe4e9e672336e0cdbf87001262c7f0b9b3a98e872c8ba50815250815260200160405180604001604052807f1b29b4f347b4bf1b35ae176b5195231bbe5747905fe23d66a6bc22323406542c81526020017f02944d64dee3fcb1542be6481bb435a6a0110ecca4da997ebe3642f1556550aa8152508152508160400181905250604051806040016040528060405180604001604052807f01ffda57a0c48cd18a0e11e94200f59dedb591bc938dbd46b862dd7a16c28e4a81526020017f2712eda6ab259f685d77af2a64cc4eb849570f879b27bc513021312ed5511e73815250815260200160405180604001604052807f156e80422c447e88218501aba3185db0f0480a86971a5bc2266ea0dfa0c0741781526020017f2a3ac84f62b84642dc440297b065ce2a4fc9a175cf79bd9db668e2b171797a218152508152508160600181905250600167ffffffffffffffff811115610620577f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b60405190808252806020026020018201604052801561065957816020015b6106466113bd565b81526020019060019003908161063e5790505b50816080018190525060405180604001604052807f01872c43e109de98f1942bf1ba47edb622e7977da1d0d28fbf62286be841f08181526020017f2874cc96da521cdc5e7f99899d705ee28aa77ebae6ce4e3c49823023ce77170781525081608001516000815181106106f5577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001018190525090565b61070b6113bd565b6107136113d7565b836000015181600060038110610752577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200201818152505083602001518160016003811061079a577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200201818152505082816002600381106107de577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002018181525050600060608360808460076107d05a03fa9050806000811461080757610809565bfe5b508061081457600080fd5b505092915050565b6108246113bd565b61082c6113f9565b83600001518160006004811061086b577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6020020181815250508360200151816001600481106108b3577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6020020181815250508260000151816002600481106108fb577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002018181525050826020015181600360048110610943577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002018181525050600060608360c08460066107d05a03fa9050806000811461096c5761096e565bfe5b508061097957600080fd5b505092915050565b6109896113bd565b60007f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd479050600083600001511480156109c6575060008360200151145b156109ea576040518060400160405280600081526020016000815250915050610a21565b604051806040016040528084600001518152602001828560200151610a0f919061180b565b83610a1a9190611778565b8152509150505b919050565b600080600467ffffffffffffffff811115610a6a577f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b604051908082528060200260200182016040528015610aa357816020015b610a906113bd565b815260200190600190039081610a885790505b5090506000600467ffffffffffffffff811115610ae9577f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b604051908082528060200260200182016040528015610b2257816020015b610b0f61141b565b815260200190600190039081610b075790505b5090508a82600081518110610b60577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200260200101819052508882600181518110610ba6577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200260200101819052508682600281518110610bec577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200260200101819052508482600381518110610c32577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200260200101819052508981600081518110610c78577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200260200101819052508781600181518110610cbe577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200260200101819052508581600281518110610d04577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200260200101819052508381600381518110610d4a577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6020026020010181905250610d5f8282610d6f565b9250505098975050505050505050565b60008151835114610d7f57600080fd5b6000835190506000600682610d94919061171e565b905060008167ffffffffffffffff811115610dd8577f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b604051908082528060200260200182016040528015610e065781602001602082028036833780820191505090505b50905060005b838110156112eb57868181518110610e4d577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001015160000151826000600684610e69919061171e565b610e7391906116c8565b81518110610eaa577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001018181525050868181518110610eef577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001015160200151826001600684610f0b919061171e565b610f1591906116c8565b81518110610f4c577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001018181525050858181518110610f91577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001015160000151600160028110610fd6577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6020020151826002600684610feb919061171e565b610ff591906116c8565b8151811061102c577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001018181525050858181518110611071577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6020026020010151600001516000600281106110b6577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200201518260036006846110cb919061171e565b6110d591906116c8565b8151811061110c577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001018181525050858181518110611151577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001015160200151600160028110611196577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200201518260046006846111ab919061171e565b6111b591906116c8565b815181106111ec577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001018181525050858181518110611231577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001015160200151600060028110611276577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002015182600560068461128b919061171e565b61129591906116c8565b815181106112cc577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200260200101818152505080806112e3906117c2565b915050610e0c565b506112f4611441565b6000602082602086026020860160086107d05a03fa905080600081146113195761131b565bfe5b508061132657600080fd5b600082600060018110611362577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002015114159550505050505092915050565b6040518060a001604052806113896113bd565b815260200161139661141b565b81526020016113a361141b565b81526020016113b061141b565b8152602001606081525090565b604051806040016040528060008152602001600081525090565b6040518060600160405280600390602082028036833780820191505090505090565b6040518060800160405280600490602082028036833780820191505090505090565b604051806040016040528061142e611463565b815260200161143b611463565b81525090565b6040518060200160405280600190602082028036833780820191505090505090565b6040518060400160405280600290602082028036833780820191505090505090565b6000611498611493846116a2565b611671565b905080828560208602820111156114ae57600080fd5b60005b858110156114de57816114c48882611608565b8452602084019350602083019250506001810190506114b1565b5050509392505050565b600082601f8301126114f957600080fd5b6002611506848285611485565b91505092915050565b60006040828403121561152157600080fd5b61152b6040611671565b9050600061153b84828501611608565b600083015250602061154f84828501611608565b60208301525092915050565b60006080828403121561156d57600080fd5b6115776040611671565b90506000611587848285016114e8565b600083015250604061159b848285016114e8565b60208301525092915050565b600061010082840312156115ba57600080fd5b6115c46060611671565b905060006115d48482850161150f565b60008301525060406115e88482850161155b565b60208301525060c06115fc8482850161150f565b60408301525092915050565b600081359050611617816118c9565b92915050565b6000610100828403121561163057600080fd5b600061163e848285016115a7565b91505092915050565b611650816117ac565b82525050565b600060208201905061166b6000830184611647565b92915050565b6000604051905081810181811067ffffffffffffffff821117156116985761169761189a565b5b8060405250919050565b600067ffffffffffffffff8211156116bd576116bc61189a565b5b602082029050919050565b60006116d3826117b8565b91506116de836117b8565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156117135761171261183c565b5b828201905092915050565b6000611729826117b8565b9150611734836117b8565b9250817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff048311821515161561176d5761176c61183c565b5b828202905092915050565b6000611783826117b8565b915061178e836117b8565b9250828210156117a1576117a061183c565b5b828203905092915050565b60008115159050919050565b6000819050919050565b60006117cd826117b8565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff821415611800576117ff61183c565b5b600182019050919050565b6000611816826117b8565b9150611821836117b8565b9250826118315761183061186b565b5b828206905092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6118d2816117b8565b81146118dd57600080fd5b5056fea2646970667358221220486c76bc25ec4ed7a75a9297c75cb5e9cc2a68515752779fc71b1163f65c055664736f6c63430008000033";
        ContractMetadata contractMetadata = new ContractMetadata(bytecode, abi);

        var registrationService = registrationContractServiceFactory.Create(contractMetadata);

        var ax = "0x2d74c9a65cdb375c7c2bbdc0680a3eb8c53c0a64a0b3f1a9c11b569fb988f798";
        var ay = "0x1670bb448571d4d6249e6e70a4dc8ea90a93cbf95571db6fd7184a5648f8cf3f";

        var b0x = "0x0aa08e4cd47b204b0162c381527bf0f8dd996d7beac1c2435ffe4bbaabcf506d";
        var b1x = "0x1395896fc0e059a7404fb91400d954e1247e13cb1c2f7c3bb9152e4fb4abf3c4";
        var b0y = "0x17d54a0fe42efeb57a0cc7025ba7386edadbcd4f198ce60f9e30219d9f50b465";
        var b1y = "0x0f2efe9b4d66cd3cc6ad88a7e99881c5bc0be1d091a109cefa5ece509819ece6";

        var cx = "0x2e718b3d439644a3e300bec0b3bc3fa5fce1577dfa2fbfd9458b69d8bbb03f30";
        var cy = "0x1c42262cc88c537748523abf7f214fdbd4b6bbef29ea451425f382fbea2faa20";

        var proof = new Proof()
        {
            AX = ax,
            AY = ay,
            B0X = b0x,
            B0Y = b0y,
            B1X = b1x,
            B1Y = b1y,
            CX = cx,
            CY = cy,
        };

        var result_0 = await registrationService.Register(proof, contractAddress);

        Console.WriteLine($"{result_0.IsSuccess} --- {result_0.Message}");

        #region voting testing
        //var contextIdentifier1 = "1_Test";
        //var userIds = new List<int>() { 1, 2, 3, 4, 5, 6 };

        //var contractMetadata = await generator.CreateSmartContractContext(contextIdentifier1, userIds);

        //string adminKey = "0xae9299499ac8c7280118a01cb26e1011a78fb6bf6d8bb493ad10d200d12fffb9";

        //var proofV = await generator.GenerateProof(contextIdentifier1, 1);

        //var contractAddress = await generator.DeploySmartContract(contextIdentifier, adminKey);
        //var contractAddress = "0x140dc7731f2b09675e4df53ab41fea8e1472851a";

        //string abi = "[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"IsUpcomingElection\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"candidates\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"candidatesVotesCount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"usersVoted\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"verifier\",\"outputs\":[{\"internalType\":\"contract Verifier\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"votes\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"votesCount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"candidateId\",\"type\":\"uint256\"}],\"name\":\"addCandidate\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"ax\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"ay\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"bx0\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"bx1\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"by0\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"by1\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"cx\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"cy\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"proofSha\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"candidateId\",\"type\":\"uint256\"}],\"name\":\"castVote\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"proofSha\",\"type\":\"uint256\"}],\"name\":\"getUserVote\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"CandidateId\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bool\",\"name\":\"electionState\",\"type\":\"bool\"}],\"name\":\"changeElectionState\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"ax\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"ay\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"bx0\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"bx1\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"by0\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"by1\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"cx\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"cy\",\"type\":\"uint256\"}],\"name\":\"getProof\",\"outputs\":[{\"components\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"X\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"Y\",\"type\":\"uint256\"}],\"internalType\":\"struct Pairing.G1Point\",\"name\":\"a\",\"type\":\"tuple\"},{\"components\":[{\"internalType\":\"uint256[2]\",\"name\":\"X\",\"type\":\"uint256[2]\"},{\"internalType\":\"uint256[2]\",\"name\":\"Y\",\"type\":\"uint256[2]\"}],\"internalType\":\"struct Pairing.G2Point\",\"name\":\"b\",\"type\":\"tuple\"},{\"components\":[{\"internalType\":\"uint256\",\"name\":\"X\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"Y\",\"type\":\"uint256\"}],\"internalType\":\"struct Pairing.G1Point\",\"name\":\"c\",\"type\":\"tuple\"}],\"internalType\":\"struct Verifier.Proof\",\"name\":\"proof\",\"type\":\"tuple\"}],\"stateMutability\":\"pure\",\"type\":\"function\"}]";
        //string bytecode = "0x60806040526001600660006101000a81548160ff02191690831515021790555034801561002b57600080fd5b5060405161003890610099565b604051809103906000f080158015610054573d6000803e3d6000fd5b506000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506100a6565b6119358061147883390190565b6113c3806100b56000396000f3fe608060405234801561001057600080fd5b50600436106100b45760003560e01c806384104be91161007157806384104be9146101b357806386194c19146101e35780638778b27d146102135780639c85af6f14610231578063aa95124f14610261578063e844d0971461027f576100b4565b80630bd4dec1146100b957806316a47c6d146100e95780632b7ac3f3146101195780633477ee2e146101375780634140be86146101675780635df8133014610183575b600080fd5b6100d360048036038101906100ce9190610a3c565b61029b565b6040516100e09190611234565b60405180910390f35b61010360048036038101906100fe9190610b17565b6102b3565b60405161011091906110a2565b60405180910390f35b6101216105ff565b60405161012e91906110bd565b60405180910390f35b610151600480360381019061014c9190610a3c565b610623565b60405161015e91906110a2565b60405180910390f35b610181600480360381019061017c91906109ea565b610643565b005b61019d60048036038101906101989190610a3c565b610660565b6040516101aa9190611234565b60405180910390f35b6101cd60048036038101906101c89190610a65565b610678565b6040516101da9190611218565b60405180910390f35b6101fd60048036038101906101f89190610a3c565b610724565b60405161020a9190611234565b60405180910390f35b61021b6107a1565b6040516102289190611234565b60405180910390f35b61024b60048036038101906102469190610a3c565b6107a7565b60405161025891906110a2565b60405180910390f35b6102696107c7565b60405161027691906110a2565b60405180910390f35b61029960048036038101906102949190610a3c565b6107da565b005b60046020528060005260406000206000915090505481565b6000808214156102f8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102ef906111f8565b60405180910390fd5b600660009054906101000a900460ff1615610348576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161033f906110d8565b60405180910390fd5b60006004600084815260200190815260200160002054101561039f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610396906111d8565b60405180910390fd5b6005600083815260200190815260200160002060009054906101000a900460ff166103ff576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103f6906111b8565b60405180910390fd5b60006104118c8c8c8c8c8c8c8c610678565b905060008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663f6af0311826040518263ffffffff1660e01b815260040161046c9190611218565b60206040518083038186803b15801561048457600080fd5b505afa9250505080156104b557506040513d601f19601f820116820180604052508101906104b29190610a13565b60015b6105045760006104fa576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016104f190611138565b60405180910390fd5b60009150506105f1565b506003600085815260200190815260200160002060009054906101000a900460ff1615610566576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161055d90611118565b60405180910390fd5b82600260008681526020019081526020016000208190555060016003600086815260200190815260200160002060006101000a81548160ff0219169083151502179055506004600084815260200190815260200160002060008154809291906105ce906112e7565b9190505550600160008154809291906105e6906112e7565b919050555060019150505b9a9950505050505050505050565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60056020528060005260406000206000915054906101000a900460ff1681565b80600660006101000a81548160ff02191690831515021790555050565b60026020528060005260406000206000915090505481565b610680610916565b610688610949565b610690610963565b610698610949565b8b8360000181815250508a83602001818152505060405180604001604052808b81526020018a81525082600001819052506040518060400160405280898152602001888152508260200181905250858160000181815250508481602001818152505082846000018190525081846020018190525080846040018190525050505098975050505050505050565b60006003600083815260200190815260200160002060009054906101000a900460ff16610786576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161077d90611158565b60405180910390fd5b60026000838152602001908152602001600020549050919050565b60015481565b60036020528060005260406000206000915054906101000a900460ff1681565b600660009054906101000a900460ff1681565b600081141561081e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610815906110f8565b60405180910390fd5b600660009054906101000a900460ff1661086d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161086490611198565b60405180910390fd5b6005600082815260200190815260200160002060009054906101000a900460ff16156108ce576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108c590611178565b60405180910390fd5b6000600460008381526020019081526020016000208190555060016005600083815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b6040518060600160405280610929610949565b8152602001610936610963565b8152602001610943610949565b81525090565b604051806040016040528060008152602001600081525090565b6040518060400160405280610976610989565b8152602001610983610989565b81525090565b6040518060400160405280600290602082028036833780820191505090505090565b6000813590506109ba8161135f565b92915050565b6000815190506109cf8161135f565b92915050565b6000813590506109e481611376565b92915050565b6000602082840312156109fc57600080fd5b6000610a0a848285016109ab565b91505092915050565b600060208284031215610a2557600080fd5b6000610a33848285016109c0565b91505092915050565b600060208284031215610a4e57600080fd5b6000610a5c848285016109d5565b91505092915050565b600080600080600080600080610100898b031215610a8257600080fd5b6000610a908b828c016109d5565b9850506020610aa18b828c016109d5565b9750506040610ab28b828c016109d5565b9650506060610ac38b828c016109d5565b9550506080610ad48b828c016109d5565b94505060a0610ae58b828c016109d5565b93505060c0610af68b828c016109d5565b92505060e0610b078b828c016109d5565b9150509295985092959890939650565b6000806000806000806000806000806101408b8d031215610b3757600080fd5b6000610b458d828e016109d5565b9a50506020610b568d828e016109d5565b9950506040610b678d828e016109d5565b9850506060610b788d828e016109d5565b9750506080610b898d828e016109d5565b96505060a0610b9a8d828e016109d5565b95505060c0610bab8d828e016109d5565b94505060e0610bbc8d828e016109d5565b935050610100610bce8d828e016109d5565b925050610120610be08d828e016109d5565b9150509295989b9194979a5092959850565b6000610bfe8383611084565b60208301905092915050565b610c1381611259565b610c1d8184611271565b9250610c288261124f565b8060005b83811015610c59578151610c408782610bf2565b9650610c4b83611264565b925050600181019050610c2c565b505050505050565b610c6a8161128d565b82525050565b610c79816112c3565b82525050565b6000610c8c60308361127c565b91507f54686520656c656374696f6e206973207374696c6c207570636f6d696e672c2060008301527f796f752063616e6e6f7420766f746521000000000000000000000000000000006020830152604082019050919050565b6000610cf260188361127c565b91507f5468652063616e646964617465206964206973206e756c6c00000000000000006000830152602082019050919050565b6000610d32601b8361127c565b91507f54686520757365722063616e20766f7465206f6e6c79206f6e636500000000006000830152602082019050919050565b6000610d7260148361127c565b91507f54686520766f74657220697320696e76616c69640000000000000000000000006000830152602082019050919050565b6000610db2602b8361127c565b91507f4b657920646f6573206e6f74206578697374732e20546865207573657220686160008301527f73206e6f7420766f7465640000000000000000000000000000000000000000006020830152604082019050919050565b6000610e1860248361127c565b91507f5468652063616e6469646174652068617320616c7265616479206265656e206160008301527f64646564000000000000000000000000000000000000000000000000000000006020830152604082019050919050565b6000610e7e60368361127c565b91507f54686520656c656374696f6e2073686f756c64206265207570636f6d696e672060008301527f696e206f7264657220746f206265206368616e676564000000000000000000006020830152604082019050919050565b6000610ee460378361127c565b91507f5468652063616e6469646174652068617320746f20626520696e20746865206560008301527f6c656374696f6e2063616e64696461746573206c6973740000000000000000006020830152604082019050919050565b6000610f4a60388361127c565b91507f5468652063616e6469646174652068617320746f20626520696e20746865206360008301527f616e64696461746573566f746573436f756e74206c69737400000000000000006020830152604082019050919050565b6000610fb060178361127c565b91507f5468652063616e6469646174654964206973206e756c6c0000000000000000006000830152602082019050919050565b604082016000820151610ff96000850182611084565b50602082015161100c6020850182611084565b50505050565b6080820160008201516110286000850182610c0a565b50602082015161103b6040850182610c0a565b50505050565b610100820160008201516110586000850182610fe3565b50602082015161106b6040850182611012565b50604082015161107e60c0850182610fe3565b50505050565b61108d816112b9565b82525050565b61109c816112b9565b82525050565b60006020820190506110b76000830184610c61565b92915050565b60006020820190506110d26000830184610c70565b92915050565b600060208201905081810360008301526110f181610c7f565b9050919050565b6000602082019050818103600083015261111181610ce5565b9050919050565b6000602082019050818103600083015261113181610d25565b9050919050565b6000602082019050818103600083015261115181610d65565b9050919050565b6000602082019050818103600083015261117181610da5565b9050919050565b6000602082019050818103600083015261119181610e0b565b9050919050565b600060208201905081810360008301526111b181610e71565b9050919050565b600060208201905081810360008301526111d181610ed7565b9050919050565b600060208201905081810360008301526111f181610f3d565b9050919050565b6000602082019050818103600083015261121181610fa3565b9050919050565b60006101008201905061122e6000830184611041565b92915050565b60006020820190506112496000830184611093565b92915050565b6000819050919050565b600060029050919050565b6000602082019050919050565b600081905092915050565b600082825260208201905092915050565b60008115159050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b60006112ce826112d5565b9050919050565b60006112e082611299565b9050919050565b60006112f2826112b9565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82141561132557611324611330565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6113688161128d565b811461137357600080fd5b50565b61137f816112b9565b811461138a57600080fd5b5056fea26469706673582212206ba983688db9c793cdbf6eb9f3eaaefac37eab9fc7b8dbbaf890d1ffe0b1f56d64736f6c63430008000033608060405234801561001057600080fd5b50611915806100206000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c8063f6af031114610030575b600080fd5b61004a6004803603810190610045919061161c565b610060565b6040516100579190611655565b60405180910390f35b600080600067ffffffffffffffff8111156100a4577f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6040519080825280602002602001820160405280156100d25781602001602082028036833780820191505090505b50905060006100e182856100fc565b14156100f15760019150506100f7565b60009150505b919050565b6000807f30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f00000019050600061012c61032b565b90508060800151516001865161014291906116c7565b1461014c57600080fd5b60006040518060400160405280600081526020016000815250905060005b865181101561027757838782815181106101ad577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6020026020010151106101bf57600080fd5b6102628261025d85608001516001856101d891906116c7565b8151811061020f577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200260200101518a8581518110610250577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6020026020010151610702565b61081b565b9150808061026f906117c1565b91505061016a565b506102c78183608001516000815181106102ba577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001015161081b565b905061030d856000015186602001516102df84610980565b85604001516102f18a60400151610980565b87606001516103038960000151610980565b8960200151610a25565b61031d5760019350505050610325565b600093505050505b92915050565b610333611375565b60405180604001604052807f24167d3edaff9fa0a924377851b3dca4a2dd5426646997cc97db379ff59b328b81526020017f1b6f8bf5948bc9177870c8df9f2053794fa6ef30172cfb702c6c64e3849bc2448152508160000181905250604051806040016040528060405180604001604052807f046681ea6031c7771236a464b8b2b5fbc3b0a2e8130c634e4ad00de8d7d1380981526020017f17148c87b3d9f1bdf7165a73ea2f9e257ee55cf560ae2b9052038e7e84653619815250815260200160405180604001604052807f21f34abc5385369249a57e1a81648571b58484aeafae297e51454b7a61381c5581526020017f045eeecfc974bb3d8225695a7b0ae99f8030bcc0ec5b4cb778bbaac62e6c03668152508152508160200181905250604051806040016040528060405180604001604052807f18fc1701e7fbedd80e8ea71c2b62a2854df01c1663ff482f5b9e17761c7fdb0681526020017f2bdcee9e262b77b8b0a910b71d269c39b143ff9a47e342cf8efe9f77851e6a0d815250815260200160405180604001604052807f11aaa0df866ea3d8bfc001ce5c4a61794d73f0faf3d28b24f0d56f9fe00606ae81526020017f257b3e95ab82663c2dcc7281caabaa5c490e0ab6843ba9e337a2cda8b6b4c4608152508152508160400181905250604051806040016040528060405180604001604052807e32cdd1cffc16bfeac7592b723b59c2f300d8d30c4fef75a90ecd3b1a4f9f1a81526020017f2b95e27982792d890e9c49ddccd7ab469a43e07d16fa6633764e5b3cfbd048e2815250815260200160405180604001604052807f1b780294f74a5aa08b1ccefe0352476d11255bdf14bbb3ce55c2d820b8b9d34081526020017f0a9d19bcd9a34f29e7f21de7ac6041ecc1f2795a1bc326929b38a1c44ef0aac58152508152508160600181905250600167ffffffffffffffff81111561061f577f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b60405190808252806020026020018201604052801561065857816020015b6106456113bc565b81526020019060019003908161063d5790505b50816080018190525060405180604001604052807f036337435a83f9fd9318829d2c2468c4841faf8b41cbf1f3fdccdb8bdbd4e80c81526020017f1e6ecfae7b9fa916636d8bd1e73c0fdd8ec333ccde7713c40dd1cfdcdeeaa96581525081608001516000815181106106f4577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001018190525090565b61070a6113bc565b6107126113d6565b836000015181600060038110610751577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002018181525050836020015181600160038110610799577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200201818152505082816002600381106107dd577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002018181525050600060608360808460076107d05a03fa9050806000811461080657610808565bfe5b508061081357600080fd5b505092915050565b6108236113bc565b61082b6113f8565b83600001518160006004811061086a577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6020020181815250508360200151816001600481106108b2577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6020020181815250508260000151816002600481106108fa577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002018181525050826020015181600360048110610942577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002018181525050600060608360c08460066107d05a03fa9050806000811461096b5761096d565bfe5b508061097857600080fd5b505092915050565b6109886113bc565b60007f30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd479050600083600001511480156109c5575060008360200151145b156109e9576040518060400160405280600081526020016000815250915050610a20565b604051806040016040528084600001518152602001828560200151610a0e919061180a565b83610a199190611777565b8152509150505b919050565b600080600467ffffffffffffffff811115610a69577f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b604051908082528060200260200182016040528015610aa257816020015b610a8f6113bc565b815260200190600190039081610a875790505b5090506000600467ffffffffffffffff811115610ae8577f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b604051908082528060200260200182016040528015610b2157816020015b610b0e61141a565b815260200190600190039081610b065790505b5090508a82600081518110610b5f577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200260200101819052508882600181518110610ba5577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200260200101819052508682600281518110610beb577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200260200101819052508482600381518110610c31577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200260200101819052508981600081518110610c77577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200260200101819052508781600181518110610cbd577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200260200101819052508581600281518110610d03577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200260200101819052508381600381518110610d49577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6020026020010181905250610d5e8282610d6e565b9250505098975050505050505050565b60008151835114610d7e57600080fd5b6000835190506000600682610d93919061171d565b905060008167ffffffffffffffff811115610dd7577f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b604051908082528060200260200182016040528015610e055781602001602082028036833780820191505090505b50905060005b838110156112ea57868181518110610e4c577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001015160000151826000600684610e68919061171d565b610e7291906116c7565b81518110610ea9577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001018181525050868181518110610eee577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001015160200151826001600684610f0a919061171d565b610f1491906116c7565b81518110610f4b577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001018181525050858181518110610f90577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001015160000151600160028110610fd5577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6020020151826002600684610fea919061171d565b610ff491906116c7565b8151811061102b577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001018181525050858181518110611070577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6020026020010151600001516000600281106110b5577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200201518260036006846110ca919061171d565b6110d491906116c7565b8151811061110b577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001018181525050858181518110611150577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001015160200151600160028110611195577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200201518260046006846111aa919061171d565b6111b491906116c7565b815181106111eb577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001018181525050858181518110611230577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002602001015160200151600060028110611275577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002015182600560068461128a919061171d565b61129491906116c7565b815181106112cb577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b60200260200101818152505080806112e2906117c1565b915050610e0b565b506112f3611440565b6000602082602086026020860160086107d05a03fa905080600081146113185761131a565bfe5b508061132557600080fd5b600082600060018110611361577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b602002015114159550505050505092915050565b6040518060a001604052806113886113bc565b815260200161139561141a565b81526020016113a261141a565b81526020016113af61141a565b8152602001606081525090565b604051806040016040528060008152602001600081525090565b6040518060600160405280600390602082028036833780820191505090505090565b6040518060800160405280600490602082028036833780820191505090505090565b604051806040016040528061142d611462565b815260200161143a611462565b81525090565b6040518060200160405280600190602082028036833780820191505090505090565b6040518060400160405280600290602082028036833780820191505090505090565b6000611497611492846116a1565b611670565b905080828560208602820111156114ad57600080fd5b60005b858110156114dd57816114c38882611607565b8452602084019350602083019250506001810190506114b0565b5050509392505050565b600082601f8301126114f857600080fd5b6002611505848285611484565b91505092915050565b60006040828403121561152057600080fd5b61152a6040611670565b9050600061153a84828501611607565b600083015250602061154e84828501611607565b60208301525092915050565b60006080828403121561156c57600080fd5b6115766040611670565b90506000611586848285016114e7565b600083015250604061159a848285016114e7565b60208301525092915050565b600061010082840312156115b957600080fd5b6115c36060611670565b905060006115d38482850161150e565b60008301525060406115e78482850161155a565b60208301525060c06115fb8482850161150e565b60408301525092915050565b600081359050611616816118c8565b92915050565b6000610100828403121561162f57600080fd5b600061163d848285016115a6565b91505092915050565b61164f816117ab565b82525050565b600060208201905061166a6000830184611646565b92915050565b6000604051905081810181811067ffffffffffffffff8211171561169757611696611899565b5b8060405250919050565b600067ffffffffffffffff8211156116bc576116bb611899565b5b602082029050919050565b60006116d2826117b7565b91506116dd836117b7565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156117125761171161183b565b5b828201905092915050565b6000611728826117b7565b9150611733836117b7565b9250817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff048311821515161561176c5761176b61183b565b5b828202905092915050565b6000611782826117b7565b915061178d836117b7565b9250828210156117a05761179f61183b565b5b828203905092915050565b60008115159050919050565b6000819050919050565b60006117cc826117b7565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8214156117ff576117fe61183b565b5b600182019050919050565b6000611815826117b7565b9150611820836117b7565b9250826118305761182f61186a565b5b828206905092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6118d1816117b7565b81146118dc57600080fd5b5056fea264697066735822122015dbefacd732ef26ea7fdacdfd5ea2b0f90fe29c9830c0b04bbcff48c116a90c64736f6c63430008000033";
        //ContractMetadata contractMetadata = new ContractMetadata(bytecode, abi);

        //var smartContractService = smartContractServiceFactory.Create(contractMetadata);

        //var result = await smartContractService.Vote(proof, 14, contractAddress);

        //var voteResult = await smartContractService.GetUserVote(proof, contractAddress);

        //var electionResult = await smartContractService.GetTotalNumberOfVotes(contractAddress);

        //        string proofToString = JsonConvert.SerializeObject(proof);


        //        QRCodeGenerator qrGenerator = new QRCodeGenerator();
        //        QRCodeData qrCodeData = qrGenerator.CreateQrCode(proofToString, QRCodeGenerator.ECCLevel.Q);

        //        BitmapByteQRCode qrCode = new BitmapByteQRCode(qrCodeData);

        //        var image = qrCode.GetGraphic(12);

        //        //read qr code

        //        using var stream = new MemoryStream(image);

        //#pragma warning disable CA1416 // Validate platform compatibility

        //        var bitmap = new Bitmap(new MemoryStream(image));

        //        var luminanceSource = new BitmapLuminanceSource(bitmap);

        //        var source = new BinaryBitmap(new HybridBinarizer(luminanceSource));

        //#pragma warning restore CA1416 // Validate platform compatibility


        //        var reader = new QRCodeReader();

        //        var result = reader.decode(source);


        //        Console.WriteLine(result.Text);

        #endregion
    }
}
